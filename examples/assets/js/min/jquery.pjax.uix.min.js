!function(a){function b(b,d,e){a(b).each(function(){a(this).attr("usepjax",0),a(this).attr("href"),location.href});var f=this;return this.on("click.pjax",b,function(b){var g=a.extend({},s(d,e));g.container||(g.container=a(this).attr("data-pjax")||f);var h=a(this).attr("usepjax");void 0!=h&&0==h&&c(b,g)})}function c(b,c,d){d=s(c,d);var f=b.currentTarget;if("A"!==f.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(b.which>1||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||location.protocol!==f.protocol||location.hostname!==f.hostname||f.href.indexOf("#")>-1&&r(f)==r(location)||b.isDefaultPrevented())){var g={url:f.href,buttonID:f,container:a(f).attr("data-pjax"),target:f,showHTMLdelay:0,startEvent:function(){},endEvent:function(){}},h=a.extend({},g,d),i=a.Event("pjax:click");a(f).trigger(i,[h]),i.isDefaultPrevented()||(e(h),b.preventDefault(),a(f).trigger("pjax:clicked",[h]))}}function d(b,c,d){d=s(c,d);var f=b.currentTarget;if("FORM"!==f.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var g={type:f.method.toUpperCase(),url:f.action,container:a(f).attr("data-pjax"),target:f};if("GET"!==g.type&&void 0!==window.FormData)g.data=new FormData(f),g.processData=!1,g.contentType=!1;else{if(a(f).find(":file").length)return;g.data=a(f).serializeArray()}e(a.extend({},g,d)),b.preventDefault()}function e(b){function h(b,d,e){e||(e={}),e.relatedTarget=c;var g=a.Event(b,e);return f.trigger(g,d),!g.isDefaultPrevented()}b=a.extend(!0,{},a.ajaxSettings,e.defaults,b),a.isFunction(b.url)&&(b.url=b.url());var c=b.target,d=q(b.url).hash,f=b.context=t(b.container);b.data||(b.data={}),a.isArray(b.data)?b.data.push({name:"_pjax",value:f.selector}):b.data._pjax=f.selector;var i;b.beforeSend=function(c,e){if("GET"!==e.type&&(e.timeout=0),c.setRequestHeader("X-PJAX","true"),c.setRequestHeader("X-PJAX-Container",f.selector),!h("pjax:beforeSend",[c,e]))return!1;e.timeout>0&&(i=setTimeout(function(){h("pjax:timeout",[c,b])&&c.abort("timeout")},e.timeout),e.timeout=0);var g=a(b.buttonID);b.startEvent(g);var j=q(e.url);d&&(j.hash=d),b.requestUrl=p(j)},b.complete=function(a,c){i&&clearTimeout(i),h("pjax:complete",[a,c,b]),h("pjax:end",[a,b])},b.error=function(a,c,d){var e=w("",a,b),f=h("pjax:error",[a,c,d,b]);"GET"==b.type&&"abort"!==c&&f&&g(e.url)},b.success=function(c,i,j){var k=e.state,l="function"==typeof a.pjax.defaults.version?a.pjax.defaults.version():a.pjax.defaults.version,m=j.getResponseHeader("X-PJAX-Version"),o=w(c,j,b),p=q(o.url);if(d&&(p.hash=d,o.url=p.href),l&&m&&l!==m)return void g(o.url);if(!o.contents)return void g(o.url);if(e.state={id:b.id||n(),url:o.url,title:o.title,container:f.selector,fragment:b.fragment,timeout:b.timeout},(b.push||b.replace)&&window.history.replaceState(e.state,o.title,o.url),a.contains(b.container,document.activeElement))try{document.activeElement.blur()}catch(a){}o.title&&(document.title=o.title),h("pjax:beforeReplace",[o.contents,b],{state:e.state,previousState:k});var s=a(b.buttonID);b.showHTMLdelay>0?setTimeout(function(){f.html(o.contents),b.endEvent(s)},b.showHTMLdelay):(f.html(o.contents),b.endEvent(s));var t=f.find("input[autofocus], textarea[autofocus]").last()[0];t&&document.activeElement!==t&&t.focus(),x(o.scripts);var u=b.scrollTo;if(d){var v=decodeURIComponent(d.slice(1)),y=document.getElementById(v)||document.getElementsByName(v)[0];y&&(u=a(y).offset().top)}"number"==typeof u&&a(window).scrollTop(u),h("pjax:success",[c,i,j,b])},e.state||(e.state={id:n(),url:window.location.href,title:document.title,container:f.selector,fragment:b.fragment,timeout:b.timeout},window.history.replaceState(e.state,document.title)),m(e.xhr),e.options=b;var j=e.xhr=a.ajax(b);return j.readyState>0&&(b.push&&!b.replace&&(B(e.state.id,o(f)),window.history.pushState(null,"",b.requestUrl)),h("pjax:start",[j,b]),h("pjax:send",[j,b])),e.xhr}function f(b,c){var d={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return e(a.extend(d,s(b,c)))}function g(a){window.history.replaceState(null,"",e.state.url),window.location.replace(a)}function k(b){h||m(e.xhr);var f,c=e.state,d=b.state;if(d&&d.container){if(h&&i==d.url)return;if(c){if(c.id===d.id)return;f=c.id<d.id?"forward":"back"}var j=y[d.id]||[],k=a(j[0]||d.container),l=j[1];if(k.length){c&&C(f,c.id,o(k));var n=a.Event("pjax:popstate",{state:d,direction:f});k.trigger(n);var p={id:d.id,url:d.url,container:k,push:!1,fragment:d.fragment,timeout:d.timeout,scrollTo:!1};if(l){k.trigger("pjax:start",[null,p]),e.state=d,d.title&&(document.title=d.title);var q=a.Event("pjax:beforeReplace",{state:d,previousState:c});k.trigger(q,[l,p]),k.html(l),k.trigger("pjax:end",[null,p])}else e(p);k[0].offsetHeight}else g(location.href)}h=!1}function l(b){var c=a.isFunction(b.url)?b.url():b.url,d=b.type?b.type.toUpperCase():"GET",e=a("<form>",{method:"GET"===d?"GET":"POST",action:c,style:"display:none"});"GET"!==d&&"POST"!==d&&e.append(a("<input>",{type:"hidden",name:"_method",value:d.toLowerCase()}));var f=b.data;if("string"==typeof f)a.each(f.split("&"),function(b,c){var d=c.split("=");e.append(a("<input>",{type:"hidden",name:d[0],value:d[1]}))});else if(a.isArray(f))a.each(f,function(b,c){e.append(a("<input>",{type:"hidden",name:c.name,value:c.value}))});else if("object"==typeof f){var g;for(g in f)e.append(a("<input>",{type:"hidden",name:g,value:f[g]}))}a(document.body).append(e),e.submit()}function m(b){b&&b.readyState<4&&(b.onreadystatechange=a.noop,b.abort())}function n(){return(new Date).getTime()}function o(a){var b=a.clone();return b.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[a.selector,b.contents()]}function p(a){return a.search=a.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),a.href.replace(/\?($|#)/,"$1")}function q(a){var b=document.createElement("a");return b.href=a,b}function r(a){return a.href.replace(/#.*/,"")}function s(b,c){return b&&c?c.container=b:c=a.isPlainObject(b)?b:{container:b},c.container&&(c.container=t(c.container)),c}function t(b){if(b=a(b),b.length){if(""!==b.selector&&b.context===document)return b;if(b.attr("id"))return a("#"+b.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+b.selector}function u(a,b){return a.filter(b).add(a.find(b))}function v(b){return a.parseHTML(b,document,!0)}function w(b,c,d){var e={},f=/<html/i.test(b),g=c.getResponseHeader("X-PJAX-URL");if(e.url=g?p(q(g)):d.requestUrl,f)var h=a(v(b.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),i=a(v(b.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var h=i=a(v(b));if(0===i.length)return e;if(e.title=u(h,"title").last().text(),d.fragment){if("body"===d.fragment)var j=i;else var j=u(i,d.fragment).first();j.length&&(e.contents="body"===d.fragment?j:j.contents(),e.title||(e.title=j.attr("title")||j.data("title")))}else f||(e.contents=i);return e.contents&&(e.contents=e.contents.not(function(){return a(this).is("title")}),e.contents.find("title").remove(),e.scripts=u(e.contents,"script[src]").remove(),e.contents=e.contents.not(e.scripts)),e.title&&(e.title=a.trim(e.title)),e}function x(b){if(b){var c=a("script[src]");b.each(function(){var b=this.src;if(!c.filter(function(){return this.src===b}).length){var e=document.createElement("script"),f=a(this).attr("type");f&&(e.type=f),e.src=a(this).attr("src"),document.head.appendChild(e)}})}}function B(a,b){y[a]=b,A.push(a),D(z,0),D(A,e.defaults.maxCacheLength)}function C(a,b,c){var d,f;y[b]=c,"forward"===a?(d=A,f=z):(d=z,f=A),d.push(b),(b=f.pop())&&delete y[b],D(d,e.defaults.maxCacheLength)}function D(a,b){for(;a.length>b;)delete y[a.shift()]}function E(){return a("meta").filter(function(){var b=a(this).attr("http-equiv");return b&&"X-PJAX-VERSION"===b.toUpperCase()}).attr("content")}function F(){a.fn.pjax=b,a.pjax=e,a.pjax.enable=a.noop,a.pjax.disable=G,a.pjax.click=c,a.pjax.submit=d,a.pjax.reload=f,a.pjax.defaults={timeout:15e3,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:!1,maxCacheLength:20,version:E},a(window).on("popstate.pjax",k)}function G(){a.fn.pjax=function(){return this},a.pjax=l,a.pjax.enable=F,a.pjax.disable=a.noop,a.pjax.click=a.noop,a.pjax.submit=a.noop,a.pjax.reload=function(){window.location.reload()},a(window).off("popstate.pjax",k)}var h=!0,i=window.location.href,j=window.history.state;j&&j.container&&(e.state=j),"state"in window.history&&(h=!1);var y={},z=[],A=[];a.event.props&&a.inArray("state",a.event.props)<0?a.event.props.push("state"):"state"in a.Event.prototype||a.event.addProp("state"),a.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),a.support.pjax?F():G()}(jQuery);